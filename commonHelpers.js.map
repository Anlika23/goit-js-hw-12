{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst KEY = '42598538-444db408f0d8256d557c709b2';\nconst BASE_URI = 'https://pixabay.com/api/';\n\nexport async function searchImages(keyword, page = 1) {\n    const perPage = 15;\n\n    const url = `${BASE_URI}?key=${KEY}&q=${encodeURIComponent(keyword)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        if (response.status !== 200) {\n            throw new Error('HTTP Error: ' + response.status);\n        }\n        return response.data;\n\n    } catch (error) {\n        throw new Error('Error fetching images: ' + error.message);\n    }\n}\n\nexport async function handleSubmit(event) {\n    event.preventDefault();\n\n    showLoadingIndicator();\n    clearGallery();\n\n    const searchInput = document.querySelector('.search-form input[type=\"text\"]');\n    const query = searchInput.value.trim();\n\n    if (query === '') {\n        hideLoadingIndicator();\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    try {\n        const images = await searchImages(query);\n\n        if (images.hits.length === 0) {\n            iziToast.warning({\n                title: 'Attention',\n                message: 'Sorry, no search results found. Please try another query.',\n                position: 'topCenter',\n            });\n        } else {\n            renderImages(images);\n        }\n    } catch (error) {\n        console.error(error.message);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while executing the request. Please try again.',\n            position: 'topCenter',\n        });\n    } finally {\n        hideLoadingIndicator();\n    }\n}","import iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n\n    images.hits.forEach(image => {\n        const cardLink = document.createElement('a');\n        cardLink.href = image.largeImageURL;\n        cardLink.rel = \"noopener noreferrer\";\n        cardLink.classList.add('card');\n\n        cardLink.innerHTML = `\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"metrics\">\n                ${createMetricContainer('Likes', image.likes).outerHTML}\n                ${createMetricContainer('Views', image.views).outerHTML}\n                ${createMetricContainer('Comments', image.comments).outerHTML}\n                ${createMetricContainer('Downloads', image.downloads).outerHTML}\n            </div>\n        `;\n\n        gallery.appendChild(cardLink);\n    });\n\n    updateGallery();\n}\n\nexport function toggleLoadMoreButton(totalHits, currentPage) {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    loadMoreButton.style.display = currentPage * 15 < totalHits ? 'block' : 'none';\n\n    if (currentPage * 15 >= totalHits) {\n        iziToast.info({\n            title: 'End of Results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topCenter',\n        });\n    }\n}\n\nfunction createMetricContainer(label, value) {\n    const container = document.createElement('div');\n    container.classList.add('metric-container');\n\n    const labelSpan = document.createElement('span');\n    labelSpan.textContent = label;\n    labelSpan.classList.add('metric-label');\n    labelSpan.style.fontWeight = 'bold';\n    container.appendChild(labelSpan);\n\n    const valueSpan = document.createElement('span');\n    valueSpan.textContent = value;\n    valueSpan.classList.add('metric-value');\n    container.appendChild(valueSpan);\n\n    return container;\n}\n\nexport function showLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.textContent = 'Loading images, please wait...';\n    loadingIndicator.style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.style.display = 'none';\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function updateGallery() {\n    const gallery = new SimpleLightbox('.gallery a', {\n        captionDelay: 250\n    });\n    gallery.refresh();\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImages, handleSubmit  } from \"./js/pixabay-api\";\nimport { renderImages, updateGallery, hideLoadingIndicator, clearGallery, showLoadingIndicator, toggleLoadMoreButton } from \"./js/render-functions\";\n\nlet currentPage = 1;\n\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\n    const searchForm = document.querySelector('.search-form');\n    const loadMoreButton = document.querySelector('.load-more-btn');\n\n    searchForm.addEventListener('submit', async function(event) {\n        event.preventDefault();\n        const query = event.target.querySelector('input[type=\"text\"]').value.trim();\n        currentPage = 1;\n        await handleSearch(query, true); \n    });\n\n    loadMoreButton.addEventListener('click', async function () {\n        currentPage++;\n        const query = document.querySelector('.search-form input[type=\"text\"]').value.trim();\n        await handleSearch(query, false); \n    });\n\n    updateGallery(); \n});\n\nasync function handleSearch(query, clearGalleryBefore) {\n    showLoadingIndicator();\n\n    if (clearGalleryBefore) {\n        clearGallery(); \n    }\n\n    if (!query) {\n        hideLoadingIndicator();\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    try {\n        const images = await searchImages(query, currentPage);\n\n        if (images.hits.length === 0) {\n            iziToast.warning({\n                title: 'Attention',\n                message: 'Sorry, no search results found. Please try another query.',\n                position: 'topCenter',\n            });\n        } else {\n            renderImages(images);\n            toggleLoadMoreButton(images.totalHits, currentPage);\n            if (currentPage * 15 >= images.totalHits) {\n                iziToast.info({\n                    title: 'End of Results',\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    position: 'topCenter',\n                });\n            }\n        }\n    } catch (error) {\n        console.error(error.message);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while executing the request. Please try again.',\n            position: 'topCenter',\n        });\n    } finally {\n        hideLoadingIndicator();\n        smoothScroll();\n    }\n}\n\nfunction smoothScroll() {\n    const card = document.querySelector('.card');\n    if (card) {\n        const cardHeight = card.getBoundingClientRect().height;\n        window.scrollBy({\n            top: cardHeight * 2,\n            behavior: 'smooth'\n        });\n    }\n}\n\n"],"names":["KEY","BASE_URI","searchImages","keyword","page","url","response","axios","error","renderImages","images","gallery","image","cardLink","createMetricContainer","updateGallery","toggleLoadMoreButton","totalHits","currentPage","loadMoreButton","iziToast","label","value","container","labelSpan","valueSpan","showLoadingIndicator","loadingIndicator","hideLoadingIndicator","clearGallery","SimpleLightbox","searchForm","event","query","handleSearch","clearGalleryBefore","smoothScroll","card","cardHeight"],"mappings":"owBAEA,MAAMA,EAAM,qCACNC,EAAW,2BAEV,eAAeC,EAAaC,EAASC,EAAO,EAAG,CAGlD,MAAMC,EAAM,GAAGJ,CAAQ,QAAQD,CAAG,MAAM,mBAAmBG,CAAO,CAAC,iEAAiEC,CAAI,eAExI,GAAI,CACA,MAAME,EAAW,MAAMC,EAAM,IAAIF,CAAG,EACpC,GAAIC,EAAS,SAAW,IACpB,MAAM,IAAI,MAAM,eAAiBA,EAAS,MAAM,EAEpD,OAAOA,EAAS,IAEnB,OAAQE,EAAO,CACZ,MAAM,IAAI,MAAM,0BAA4BA,EAAM,OAAO,CAC5D,CACL,CCfO,SAASC,EAAaC,EAAQ,CACjC,MAAMC,EAAU,SAAS,cAAc,UAAU,EAEjDD,EAAO,KAAK,QAAQE,GAAS,CACzB,MAAMC,EAAW,SAAS,cAAc,GAAG,EAC3CA,EAAS,KAAOD,EAAM,cACtBC,EAAS,IAAM,sBACfA,EAAS,UAAU,IAAI,MAAM,EAE7BA,EAAS,UAAY;AAAA,wBACLD,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,kBAE5CE,EAAsB,QAASF,EAAM,KAAK,EAAE,SAAS;AAAA,kBACrDE,EAAsB,QAASF,EAAM,KAAK,EAAE,SAAS;AAAA,kBACrDE,EAAsB,WAAYF,EAAM,QAAQ,EAAE,SAAS;AAAA,kBAC3DE,EAAsB,YAAaF,EAAM,SAAS,EAAE,SAAS;AAAA;AAAA,UAIvED,EAAQ,YAAYE,CAAQ,CACpC,CAAK,EAEDE,GACJ,CAEO,SAASC,EAAqBC,EAAWC,EAAa,CACzD,MAAMC,EAAiB,SAAS,cAAc,gBAAgB,EAC9DA,EAAe,MAAM,QAAUD,EAAc,GAAKD,EAAY,QAAU,OAEpEC,EAAc,IAAMD,GACpBG,EAAS,KAAK,CACV,MAAO,iBACP,QAAS,6DACT,SAAU,WACtB,CAAS,CAET,CAEA,SAASN,EAAsBO,EAAOC,EAAO,CACzC,MAAMC,EAAY,SAAS,cAAc,KAAK,EAC9CA,EAAU,UAAU,IAAI,kBAAkB,EAE1C,MAAMC,EAAY,SAAS,cAAc,MAAM,EAC/CA,EAAU,YAAcH,EACxBG,EAAU,UAAU,IAAI,cAAc,EACtCA,EAAU,MAAM,WAAa,OAC7BD,EAAU,YAAYC,CAAS,EAE/B,MAAMC,EAAY,SAAS,cAAc,MAAM,EAC/C,OAAAA,EAAU,YAAcH,EACxBG,EAAU,UAAU,IAAI,cAAc,EACtCF,EAAU,YAAYE,CAAS,EAExBF,CACX,CAEO,SAASG,GAAuB,CACnC,MAAMC,EAAmB,SAAS,cAAc,oBAAoB,EACpEA,EAAiB,YAAc,iCAC/BA,EAAiB,MAAM,QAAU,OACrC,CAEO,SAASC,GAAuB,CACnC,MAAMD,EAAmB,SAAS,cAAc,oBAAoB,EACpEA,EAAiB,MAAM,QAAU,MACrC,CAEO,SAASE,GAAe,CAC3B,MAAMlB,EAAU,SAAS,cAAc,UAAU,EACjDA,EAAQ,UAAY,EACxB,CAEO,SAASI,GAAgB,CACZ,IAAIe,EAAe,aAAc,CAC7C,aAAc,GACtB,CAAK,EACO,QAAO,CACnB,CC1EA,IAAIZ,EAAc,EAElB,SAAS,iBAAiB,mBAAoB,gBAAkB,CAC5D,MAAMa,EAAa,SAAS,cAAc,cAAc,EAClDZ,EAAiB,SAAS,cAAc,gBAAgB,EAE9DY,EAAW,iBAAiB,SAAU,eAAeC,EAAO,CACxDA,EAAM,eAAc,EACpB,MAAMC,EAAQD,EAAM,OAAO,cAAc,oBAAoB,EAAE,MAAM,OACrEd,EAAc,EACd,MAAMgB,EAAaD,EAAO,EAAI,CACtC,CAAK,EAEDd,EAAe,iBAAiB,QAAS,gBAAkB,CACvDD,IACA,MAAMe,EAAQ,SAAS,cAAc,iCAAiC,EAAE,MAAM,OAC9E,MAAMC,EAAaD,EAAO,EAAK,CACvC,CAAK,EAEDlB,GACJ,CAAC,EAED,eAAemB,EAAaD,EAAOE,EAAoB,CAOnD,GANAT,IAEIS,GACAN,IAGA,CAACI,EAAO,CACRL,IACAR,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8BACT,SAAU,WACtB,CAAS,EACD,MACH,CAED,GAAI,CACA,MAAMV,EAAS,MAAMR,EAAa+B,EAAOf,CAAW,EAEhDR,EAAO,KAAK,SAAW,EACvBU,EAAS,QAAQ,CACb,MAAO,YACP,QAAS,4DACT,SAAU,WAC1B,CAAa,GAEDX,EAAaC,CAAM,EACnBM,EAAqBN,EAAO,UAAWQ,CAAW,EAC9CA,EAAc,IAAMR,EAAO,WAC3BU,EAAS,KAAK,CACV,MAAO,iBACP,QAAS,6DACT,SAAU,WAC9B,CAAiB,EAGZ,OAAQZ,EAAO,CACZ,QAAQ,MAAMA,EAAM,OAAO,EAC3BY,EAAS,MAAM,CACX,MAAO,QACP,QAAS,mEACT,SAAU,WACtB,CAAS,CACT,QAAc,CACNQ,IACAQ,GACH,CACL,CAEA,SAASA,GAAe,CACpB,MAAMC,EAAO,SAAS,cAAc,OAAO,EAC3C,GAAIA,EAAM,CACN,MAAMC,EAAaD,EAAK,sBAAqB,EAAG,OAChD,OAAO,SAAS,CACZ,IAAKC,EAAa,EAClB,SAAU,QACtB,CAAS,CACJ,CACL"}