{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["'use strict';\n\nimport axios from 'axios';\n\nconst KEY = '42598538-444db408f0d8256d557c709b2';\nconst BASE_URI = 'https://pixabay.com/api/';\n\n// Функція для виконання HTTP-запиту до API Pixabay\nexport async function searchImages(keyword, page = 1) {\n   const perPage = 15;\n\n    const url = `${BASE_URI}?key=${KEY}&q=${encodeURIComponent(keyword)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n    \n    try {\n       const { data } = await axios.get(url);\n        return data;\n        \n    } catch (error) {\n        throw new Error('Error fetching images: ' + error.message);\n    }\n}\n    \n    export async function handleSubmit(event) {\n        event.preventDefault();\n\n        showLoadingIndicator();\n        clearGallery();\n\n        const searchInput = document.querySelector('.search-form input[type=\"text\"]');\n        const query = searchInput.value.trim();\n\n        if (query === '') {\n            hideLoadingIndicator();\n            iziToast.error({\n                title: 'Помилка',\n                message: 'Будь ласка, введіть текст для пошуку',\n                position: 'topCenter',\n            });\n            return;\n        }\n\n        try {\n            const images = await searchImages(query);\n\n            if (images.hits.length === 0) {\n                iziToast.warning({\n                    title: 'Увага',\n                    message: 'Вибачте, результатів пошуку не знайдено. Спробуйте інший запит.',\n                    position: 'topCenter',\n                });\n            } else {\n                renderImages(images);\n            }\n        } catch (error) {\n            console.error(error.message);\n            iziToast.error({\n                title: 'Помилка',\n                message: 'Під час виконання запиту сталася помилка. Будь ласка, спробуйте ще раз.',\n                position: 'topCenter',\n            });\n        } finally {\n            hideLoadingIndicator();\n        }\n    }\n\n","'use strict';\n\nimport iziToast from 'izitoast';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nexport function renderImages(images) {\n    const gallery = document.querySelector('.gallery');\n    images.hits.forEach(image => {\n        const cardLink = document.createElement('a');\n        cardLink.href = image.largeImageURL;\n        cardLink.rel = \"noopener noreferrer\";\n        cardLink.classList.add('card');\n\n        cardLink.innerHTML = `\n            <img src=\"${image.webformatURL}\" alt=\"${image.tags}\">\n            <div class=\"metrics\">\n                ${createMetricContainer('Likes', image.likes).outerHTML}\n                ${createMetricContainer('Views', image.views).outerHTML}\n                ${createMetricContainer('Comments', image.comments).outerHTML}\n                ${createMetricContainer('Downloads', image.downloads).outerHTML}\n            </div>\n        `;\n\n        gallery.appendChild(cardLink);\n    });\n\n    updateGallery();\n}\n\nexport function toggleLoadMoreButton(totalHits, currentPage) {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    loadMoreButton.style.display = currentPage * 15 < totalHits ? 'block' : 'none';\n\n    if (currentPage * 15 >= totalHits) {\n        iziToast.info({\n            title: 'End of Results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topCenter',\n        });\n    }\n}\n\n// Функція для створення контейнера з текстом та числовим значенням\nfunction createMetricContainer(label, value) {\n    const container = document.createElement('div');\n    container.classList.add('metric-container');\n\n    const labelSpan = document.createElement('span');\n    labelSpan.textContent = label;\n    labelSpan.classList.add('metric-label');\n    labelSpan.style.fontWeight = 'bold'; \n    container.appendChild(labelSpan);\n\n    const valueSpan = document.createElement('span');\n    valueSpan.textContent = value;\n    valueSpan.classList.add('metric-value');\n    container.appendChild(valueSpan);\n\n    return container;\n}\n\n// Функція для показу індикатора завантаження\nexport function showLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.textContent = 'Loading images, please wait...';\n    loadingIndicator.style.display = 'block';\n}\n\nexport function hideLoadingIndicator() {\n    const loadingIndicator = document.querySelector('.loading-indicator');\n    loadingIndicator.style.display = 'none';\n}\n\nexport function clearGallery() {\n    const gallery = document.querySelector('.gallery');\n    gallery.innerHTML = '';\n}\n\nexport function updateGallery() {\n    const gallery = new SimpleLightbox('.gallery a', {\n        captionDelay: 250\n    });\n    gallery.refresh();\n}","'use strict';\n\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport { searchImages } from \"./js/pixabay-api\";\nimport { renderImages, updateGallery, hideLoadingIndicator, clearGallery, showLoadingIndicator } from \"./js/render-functions\";\n\nlet currentPage = 1;\nlet currentKeyword = '';\n\ndocument.addEventListener(\"DOMContentLoaded\", async function () {\n    const searchForm = document.querySelector('.search-form');\n    const loadMoreButton = document.querySelector('.load-more-btn');\n   \n    searchForm.addEventListener('submit', async function(event) {\n        event.preventDefault();\n        currentKeyword = event.target.querySelector('input[type=\"text\"]').value.trim();\n        currentPage = 1;\n        await handleSearch();\n    });\n\n    loadMoreButton.addEventListener('click', async function () {\n        currentPage++;\n        await handleSearch();\n    });\n\n    const defaultQuery = 'your_default_query_here'; \n    const imagesData = await searchImages(defaultQuery);\n\n    renderImages(imagesData);\n    updateGallery(); \n});\n\nasync function handleSearch() {\n    showLoadingIndicator();\n\n    const searchInput = document.querySelector('.search-form input[type=\"text\"]');\n    const query = searchInput.value.trim();\n    const gallery = document.querySelector('.gallery');\n\n    if (query === '') {\n        hideLoadingIndicator();\n        iziToast.error({\n            title: 'Error',\n            message: 'Please enter a search query',\n            position: 'topCenter',\n        });\n        return;\n    }\n\n    try {\n        const images = await searchImages(query, currentPage);\n\n        if (images.hits.length === 0) {\n            iziToast.warning({\n                title: 'Attention',\n                message: 'Sorry, no search results found. Please try another query.',\n                position: 'topCenter',\n            });\n        } else {\n            renderImages(images);\n            // gallery.style.display = 'block'; // Ensure gallery is displayed\n            toggleLoadMoreButton(images.totalHits);\n        }\n    } catch (error) {\n        console.error(error.message);\n        iziToast.error({\n            title: 'Error',\n            message: 'An error occurred while executing the request. Please try again.',\n            position: 'topCenter',\n        });\n    } finally {\n        hideLoadingIndicator();\n        smoothScroll();\n    }\n}\n\nfunction toggleLoadMoreButton(totalHits) {\n    const loadMoreButton = document.querySelector('.load-more-btn');\n    loadMoreButton.style.display = currentPage * 15 < totalHits ? 'block' : 'none';\n\n    if (currentPage * 15 >= totalHits) {\n        iziToast.info({\n            title: 'End of Results',\n            message: \"We're sorry, but you've reached the end of search results.\",\n            position: 'topCenter',\n        });\n    }\n}\n\nfunction smoothScroll() {\n    const cardHeight = document.querySelector('.card').getBoundingClientRect().height;\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth'\n    });\n}"],"names":["KEY","BASE_URI","searchImages","keyword","page","url","data","axios","error","renderImages","images","gallery","image","cardLink","createMetricContainer","updateGallery","label","value","container","labelSpan","valueSpan","showLoadingIndicator","loadingIndicator","hideLoadingIndicator","SimpleLightbox","currentPage","searchForm","loadMoreButton","event","handleSearch","imagesData","query","iziToast","toggleLoadMoreButton","smoothScroll","totalHits","cardHeight"],"mappings":"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"}